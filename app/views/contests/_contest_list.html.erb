<div class="inner">
  <table class="table">
    <thead>
      <tr>
        <% unless current_context.election.nil? -%>         
        <th>Position
        </th>
        <% end -%>
        <th>
          <%= t("activerecord.attributes.contest.contest", :default => t("activerecord.labels.contest", :default => "Contest")) %>
        </th>
        <th>
          <%= t("activerecord.attributes.contest.candidates", :default => t("activerecord.labels.candidates", :default => "Candidates")) %>
        </th>
        <th class="last">
          &nbsp;
        </th>
      </tr>
    </thead>
    <tbody id="contest-list">
      <% @contests.each do |contest| -%>
        <% content_tag_for(:tr, contest, :class => cycle(:odd, :even)) do %>
        <% unless current_context.election.nil? -%> 
				<td class="drag_handle">
          <b style="cursor:move">[drag]</b>
        </td>
        <% end -%>
        <td>
          <%= link_to contest.display_name, contest_path(contest) %>
        </td>
        <td>
          <%= contest.candidates.count %>
        </td>
        <td class="last">
          <%= link_to "#{t("web-app-theme.show", :default => "Show")}", contest_path(contest) %>|<%= link_to "#{t("web-app-theme.edit", :default => "Edit")}", edit_contest_path(contest) %>|<%= link_to "#{t("web-app-theme.delete", :default => "Delete")}", contest_path(contest), :method => :delete, :confirm => "#{t("web-app-theme.confirm", :default => "Are you sure?")}" %>
        </td>
      <% end -%>
      <% end -%>
    </tbody>
  </table>
  <div class="actions-bar wat-cf">
    <div class="actions">
      <%= link_to "#{t("web-app-theme.new", :default => "Add new contest")}", :controller => "contests", :action => "new" %> 
    </div>
    <%= will_paginate @contests %>
  </div>
</div>
<%= sortable_element('contest-list', :url => {:action => 'sort', :id => @election}, :handle => :drag_handle, :tag => :tr, :complete => visual_effect(:highlight, 'contest-list')) unless current_context.election.nil? %>
